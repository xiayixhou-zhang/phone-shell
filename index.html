<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>æˆ‘çš„å°æ‰‹æœº</title>
  <style>
    /* åŸºç¡€é‡ç½®ï¼šæ¶ˆé™¤æ‰€æœ‰é»˜è®¤è¾¹è· */
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #fff; font-family: -apple-system, sans-serif; overflow-x: hidden; }

    /* èƒŒæ™¯å®¹å™¨ */
    .screen {
      width: 100vw; min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
      padding-bottom: 120px; 
    }

    /* é¡¶éƒ¨å¡ç‰‡ï¼šç»å¯¹å±…ä¸­ */
    .top-card {
      width: 90%; margin: 50px auto 20px; padding: 20px;
      background: rgba(245, 245, 250, 0.8); border-radius: 28px;
      text-align: left; backdrop-filter: blur(10px);
    }
    .name { font-size: 24px; font-weight: bold; margin: 0; }
    .mood-box { font-size: 14px; background: #fff; display: inline-block; padding: 6px 14px; border-radius: 20px; margin-top: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }

    /* ä¸»å±ç½‘æ ¼ï¼šä¸¥æ ¼ 4 åˆ—å¸ƒå±€ */
    .grid {
      width: 90%; display: grid; 
      grid-template-columns: repeat(4, 1fr); 
      gap: 20px 10px; /* ä¸Šä¸‹é—´è·20ï¼Œå·¦å³é—´è·10 */
      justify-items: center; align-items: start;
    }

    /* å¤©æ°”å¤§ç»„ä»¶ï¼šè·¨ 2 åˆ— */
    .widget-weather {
      grid-column: span 2; width: 100%; height: 160px;
      background: #f0f0f5; border-radius: 28px;
      padding: 20px; position: relative; display: flex; flex-direction: column; justify-content: center;
    }

    /* App å®¹å™¨ï¼šå¼ºåˆ¶å‚ç›´å¯¹é½ */
    .app-item {
      display: flex; flex-direction: column; align-items: center; 
      text-decoration: none; width: 100%;
    }

    .icon-wrapper {
      width: 62px; height: 62px; border-radius: 16px;
      background: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      display: flex; align-items: center; justify-content: center; overflow: hidden;
      margin-bottom: 6px;
    }
    .icon-wrapper img { width: 100%; height: 100%; object-fit: cover; }
    /* å¤„ç†æ²¡ä¸Šä¼ å›¾ç‰‡æ—¶çš„æ˜¾ç¤º */
    .icon-wrapper img[src=""], .icon-wrapper img:not([src]) { opacity: 0; }

    .app-label { font-size: 11px; color: #333; font-weight: 500; white-space: nowrap; }

    /* åº•éƒ¨ Dockï¼šæ‚¬æµ®å¯¹é½ */
    .dock-container {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
      width: 90%; height: 92px; background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
      border-radius: 32px; border: 1px solid rgba(255,255,255,0.4);
      display: grid; grid-template-columns: repeat(4, 1fr);
      align-items: center; justify-items: center;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1); z-index: 100;
    }

    /* è®¾ç½®å¼¹çª—æ ·å¼ */
    .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); z-index:1001; align-items:flex-end; }
    .modal.active { display: flex; }
    .modal-content { width:100%; background:#fff; border-radius:32px 32px 0 0; padding:25px; animation: slideUp 0.3s ease; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    .s-row { background:#f5f5f7; padding:15px; border-radius:18px; margin-bottom:12px; display:flex; justify-content:space-between; align-items:center; }
  </style>
</head>
<body>

<div class="screen">
  <div class="top-card">
    <p class="name">çŒ«çŒ«</p>
    <div class="mood-box" id="mood-val">ä»Šå¤©å¿ƒæƒ…ï¼šğŸ©·</div>
  </div>

  <div class="grid">
    <div class="widget-weather" onclick="openSettings()">
      <div style="font-size:12px; color:#888;">é’ç§€åŒº ğŸ”</div>
      <div style="font-size:38px; font-weight:bold; margin: 4px 0;">14Â°</div>
      <div style="font-size:14px; color:#444;">å¤§é›¾</div>
      <img id="img-weather" style="position:absolute; top:20px; right:20px; width:45px;">
    </div>

    <a href="wechat.html" class="app-item">
      <div class="icon-wrapper"><img src="./wechat.png" id="img-wechat"></div>
      <span class="app-label">å¾®ä¿¡</span>
    </a>
    <div class="app-item">
      <div class="icon-wrapper"><img src="./health.png" id="img-health"></div>
      <span class="app-label">çŠ¶æ€</span>
    </div>
    <div class="app-item">
      <div class="icon-wrapper"><img src="./music.png" id="img-music"></div>
      <span class="app-label">ä¸€èµ·å¬æ­Œ</span>
    </div>
    <div class="app-item">
      <div class="icon-wrapper"><img src="./books.png" id="img-books"></div>
      <span class="app-label">ä¸€èµ·çœ‹ä¹¦</span>
    </div>
    <div class="app-item">
      <div class="icon-wrapper"><img src="./home.png" id="img-home"></div>
      <span class="app-label">å®¶å›­</span>
    </div>
    <div class="app-item">
      <div class="icon-wrapper"><img src="./reminders.png" id="img-reminders"></div>
      <span class="app-label">æé†’</span>
    </div>
  </div>
</div>

<div class="dock-container">
  <a href="diary.html" class="app-item">
    <div class="icon-wrapper" style="margin-bottom:0;"><img src="./diary.png" id="img-diary"></div>
  </a>
  <a href="memory.html" class="app-item">
    <div class="icon-wrapper" style="margin-bottom:0;"><img src="./memory.png" id="img-memory"></div>
  </a>
  <a href="calendar.html" class="app-item">
    <div class="icon-wrapper" style="margin-bottom:0;"><img src="./calendar.png" id="img-calendar"></div>
  </a>
  <div class="app-item" onclick="openSettings()">
    <div class="icon-wrapper" style="margin-bottom:0;"><img src="./settings.png" id="img-settings"></div>
  </div>
</div>

<div id="settings-modal" class="modal" onclick="if(event.target==this) closeSettings()">
  <div class="modal-content">
    <div style="width:40px; height:5px; background:#ddd; border-radius:10px; margin:0 auto 20px;"></div>
    <div class="s-row">
      <span>é…ç½®å›¾æ ‡</span>
      <select id="app-sel" style="border:none; background:none; font-weight:600;">
        <option value="wechat">å¾®ä¿¡</option>
        <option value="health">çŠ¶æ€</option>
        <option value="music">ä¸€èµ·å¬æ­Œ</option>
        <option value="books">ä¸€èµ·çœ‹ä¹¦</option>
        <option value="home">å®¶å›­</option>
        <option value="reminders">æé†’</option>
        <option value="diary">æ—¥è®°(Dock)</option>
        <option value="memory">è®°å¿†(Dock)</option>
        <option value="calendar">æ—¥å†(Dock)</option>
        <option value="settings">è®¾ç½®(Dock)</option>
        <option value="weather">å¤©æ°”ç»„ä»¶</option>
      </select>
    </div>
    <div class="s-row">
      <span>é€‰å–æ–‡ä»¶</span>
      <input type="file" id="icon-file" accept="image/*">
    </div>
    <div class="s-row">
      <span>æˆ‘çš„ç”Ÿæ—¥</span>
      <input type="date" id="bday-val" style="border:none;">
    </div>
    <button onclick="saveAll()" style="width:100%; padding:16px; background:#007AFF; color:#fff; border:none; border-radius:20px; font-weight:600; font-size:16px; margin-top:10px;">å®Œæˆå¹¶åº”ç”¨</button>
  </div>
</div>

<script>
  function openSettings() { document.getElementById('settings-modal').classList.add('active'); }
  function closeSettings() { document.getElementById('settings-modal').classList.remove('active'); }

  function saveAll() {
    const app = document.getElementById('app-sel').value;
    const file = document.getElementById('icon-file').files[0];
    const bday = document.getElementById('bday-val').value;

    if(bday) localStorage.setItem('u-bday', bday);
    if(file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        localStorage.setItem('icon-' + app, e.target.result);
        const img = document.getElementById('img-' + app);
        if(img) img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
    closeSettings();
    updateUI();
  }

  function updateUI() {
    const apps = ['wechat','health','music','books','home','reminders','diary','memory','calendar','settings','weather'];
    apps.forEach(a => {
      const saved = localStorage.getItem('icon-' + a);
      const img = document.getElementById('img-' + a);
      if(saved && img) img.src = saved;
    });
    // ç”Ÿæ—¥æ£€æŸ¥
    const bday = localStorage.getItem('u-bday');
    if(bday && bday.slice(5,10) === new Date().toISOString().slice(5,10)) {
      document.getElementById('mood-val').innerText = "ğŸ‚ ç”Ÿæ—¥å¿«ä¹ï¼";
    }
  }

  window.onload = updateUI;
</script>

</body>
</html>
