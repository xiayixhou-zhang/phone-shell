<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>æˆ‘çš„å°æ‰‹æœº</title>
  <style>
    /* æ ¸å¿ƒæ ·å¼ï¼šç¡®ä¿ Ins é£ä¸ iOS å¸ƒå±€ç¨³å®š */
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow-x: hidden; background: #fff; font-family: -apple-system, sans-serif; }
   Â 
    .screen {
      width: 100vw; min-height: 100vh;
      background: #fdfdfd; display: flex; flex-direction: column; align-items: center;
      padding-bottom: 120px; /* ä¸º Dock ç•™å‡ºç©ºé—´ */
    }

    /* é¡¶éƒ¨çŒ«çŒ«å¡ç‰‡ */
    .top-card {
      width: 85%; margin-top: 50px; padding: 20px;
      background: rgba(245, 245, 250, 0.6); border-radius: 25px;
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    }
    .name { font-size: 24px; font-weight: bold; }
    .mood-box { font-size: 14px; background: white; display: inline-block; padding: 6px 12px; border-radius: 15px; margin-top: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

    /* å›¾æ ‡åŒºåŸŸå¸ƒå±€ï¼š4åˆ—æ’åˆ— */
    .grid {
      width: 92%; margin-top: 25px;
      display: grid; grid-template-columns: repeat(4, 1fr);Â 
      column-gap: 15px; row-gap: 25px;
    }

    /* å¤©æ°”å¤§ç»„ä»¶ï¼šå  2 åˆ—å®½ */
    .widget-weather {
      grid-column: span 2; height: 155px;
      background: #f0f0f5; border-radius: 28px;
      display: flex; flex-direction: column; justify-content: center; padding-left: 20px;
      position: relative; overflow: hidden;
    }

    /* App ç›’å­ */
    .app-box { display: flex; flex-direction: column; align-items: center; text-decoration: none; color: inherit; }
    .icon-wrapper {
      width: 60px; height: 60px; border-radius: 16px;
      background: #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.07);
      display: flex; align-items: center; justify-content: center; overflow: hidden;
    }
    .icon-wrapper img { width: 100%; height: 100%; object-fit: cover; }
    .icon-wrapper img[src=""], .icon-wrapper img:not([src]) { opacity: 0; } /* æ²¡å›¾æ—¶ä¸æ˜¾ç¤ºç ´å›¾ */
   Â 
    .app-label { margin-top: 6px; font-size: 11px; color: #333; font-weight: 500; }

    /* åº•éƒ¨ Dock æ ï¼šå›ºå®šåœ¨åº•éƒ¨ */
    .dock {
      position: fixed; bottom: 25px;
      width: 90%; height: 90px;
      background: rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
      border-radius: 30px; border: 1px solid rgba(255,255,255,0.3);
      display: flex; justify-content: space-evenly; align-items: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      z-index: 99;
    }

    /* è®¾ç½®å¼¹çª— */
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 1000; align-items: flex-end; }
    .modal.active { display: flex; }
    .modal-content { width: 100%; background: #fff; border-radius: 30px 30px 0 0; padding: 25px; box-sizing: border-box; animation: slideUp 0.3s ease; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    .s-row { background: #f7f7f7; padding: 12px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; font-size: 14px; }
  </style>
</head>
<body>

<div class="screen">
  <div class="top-card">
    <div class="name">çŒ«çŒ«</div>
    <div class="mood-box" id="mood-text">ä»Šå¤©å¿ƒæƒ…ï¼šğŸ©·</div>
  </div>

  <div class="grid">
    <div class="widget-weather" onclick="openSettings()">
      <div style="font-size:12px; color:#888;">é’ç§€åŒº ğŸ”</div>
      <div style="font-size:36px; font-weight:bold; margin: 5px 0;">14Â°</div>
      <div style="font-size:14px; color:#444;">å¤§é›¾</div>
      <img id="img-weather" style="position:absolute; top:20px; right:20px; width:45px;">
    </div>

    <a class="app-box" href="wechat.html">
      <div class="icon-wrapper"><img src="./wechat.png" id="img-wechat"></div>
      <div class="app-label">å¾®ä¿¡</div>
    </a>

    <div class="app-box">
      <div class="icon-wrapper"><img src="./health.png" id="img-health"></div>
      <div class="app-label">çŠ¶æ€</div>
    </div>

    <div class="app-box">
      <div class="icon-wrapper"><img src="./music.png" id="img-music"></div>
      <div class="app-label">ä¸€èµ·å¬æ­Œ</div>
    </div>

    <div class="app-box">
      <div class="icon-wrapper"><img src="./books.png" id="img-books"></div>
      <div class="app-label">ä¸€èµ·çœ‹ä¹¦</div>
    </div>

    <div class="app-box">
      <div class="icon-wrapper"><img src="./home.png" id="img-home"></div>
      <div class="app-label">å®¶å›­</div>
    </div>

    <div class="app-box">
      <div class="icon-wrapper"><img src="./reminders.png" id="img-reminders"></div>
      <div class="app-label">æé†’</div>
    </div>
  </div>

  <div class="dock">
    <a class="app-box" href="diary.html">
      <div class="icon-wrapper"><img src="./diary.png" id="img-diary"></div>
    </a>
    <a class="app-box" href="memory.html">
      <div class="icon-wrapper"><img src="./memory.png" id="img-memory"></div>
    </a>
    <a class="app-box" href="calendar.html">
      <div class="icon-wrapper"><img src="./calendar.png" id="img-calendar"></div>
    </a>
    <div class="app-box" onclick="openSettings()">
      <div class="icon-wrapper"><img src="./settings.png" id="img-settings"></div>
    </div>
  </div>
</div>

<div id="settings-modal" class="modal" onclick="if(event.target==this) closeSettings()">
  <div class="modal-content">
    <div style="width:40px; height:4px; background:#ddd; border-radius:10px; margin:0 auto 15px;"></div>
    <h4 style="margin:0 0 15px 5px;">ä¸ªæ€§åŒ–è®¾ç½®</h4>
   Â 
    <div class="s-row">
      <span>é€‰æ‹© App</span>
      <select id="app-selector" style="border:none; background:none; font-weight:bold;">
        <option value="wechat">å¾®ä¿¡</option>
        <option value="health">çŠ¶æ€</option>
        <option value="music">ä¸€èµ·å¬æ­Œ</option>
        <option value="books">ä¸€èµ·çœ‹ä¹¦</option>
        <option value="home">å®¶å›­</option>
        <option value="reminders">æé†’</option>
        <option value="diary">æ—¥è®°(Dock)</option>
        <option value="memory">è®°å¿†(Dock)</option>
        <option value="calendar">æ—¥å†(Dock)</option>
        <option value="settings">è®¾ç½®(Dock)</option>
        <option value="weather">å¤©æ°”</option>
      </select>
    </div>
   Â 
    <div class="s-row">
      <span>æ›´æ¢å›¾æ ‡</span>
      <input type="file" id="icon-upload" accept="image/*">
    </div>

    <div class="s-row">
      <span>æˆ‘çš„ç”Ÿæ—¥</span>
      <input type="date" id="set-bday" style="border:none; background:none;">
    </div>

    <button onclick="saveSettings()" style="width:100%; padding:15px; background:#007AFF; color:white; border:none; border-radius:18px; font-weight:bold; font-size:16px; margin-top:10px;">ä¿å­˜ä¿®æ”¹</button>
  </div>
</div>

<script>
  function openSettings() { document.getElementById('settings-modal').classList.add('active'); }
  function closeSettings() { document.getElementById('settings-modal').classList.remove('active'); }

  function saveSettings() {
    const app = document.getElementById('app-selector').value;
    const file = document.getElementById('icon-upload').files[0];
    const bday = document.getElementById('set-bday').value;

    if(bday) localStorage.setItem('user-bday', bday);
    if(file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        localStorage.setItem('icon-' + app, e.target.result);
        const targetImg = document.getElementById('img-' + app);
        if(targetImg) targetImg.src = e.target.result;
      };
      reader.readAsDataURL(file);
    }
    closeSettings();
    checkBday();
  }

  function checkBday() {
    const bday = localStorage.getItem('user-bday');
    if(bday) {
      const today = new Date().toISOString().slice(5,10);
      if(today === bday.slice(5,10)) document.getElementById('mood-text').innerText = "ğŸ‚ ç”Ÿæ—¥å¿«ä¹ï¼";
    }
  }

  // åŠ è½½æ‰€æœ‰ä¿å­˜è¿‡çš„å›¾æ ‡
  window.onload = function() {
    const allApps = ['wechat','health','music','books','home','reminders','diary','memory','calendar','settings','weather'];
    allApps.forEach(app => {
      const saved = localStorage.getItem('icon-' + app);
      const img = document.getElementById('img-' + app);
      if(saved && img) img.src = saved;
    });
    checkBday();
  };
</script>

</body>
</html>
