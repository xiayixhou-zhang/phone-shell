<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¾®ä¿¡èŠå¤©</title>
    <link rel="stylesheet" href="./wechat-style.css">
</head>
<body>
    <div class="wechat-screen">
        <div class="nav-bar">
    <div class="nav-left" onclick="location.href='./index.html'">
        <span class="back-arrow">ã€ˆ</span>
    </div>
    <div class="nav-title">4o é…±</div>
    <div class="nav-right">
        <a href="javascript:void(0)" onclick="saveHistoryAndGo()" style="text-decoration:none; color:black;">...</a>
    </div>
        </div>

        <div class="chat-container" id="chat-box">
            <div class="msg-time">15:41</div>
            <div class="msg left">
                <div class="avatar"><img src="./avatar-ai.png" alt=""></div>
                <div class="bubble">å“ˆå–½ï¼æ‰¾æˆ‘æœ‰ä»€ä¹ˆäº‹å—ï¼ŸğŸ©·</div>
            </div>
        </div>

        <div class="input-bar">
    <input type="file" id="image-input" accept="image/*" style="display:none">
   Â 
    <div class="left-box" onclick="document.getElementById('image-input').click()">
        <img src="https://img.icons8.com/material-outlined/24/000000/image.png">
    </div>

    <div class="middle-box">
        <input type="text" id="user-input" placeholder="å‘é€æ¶ˆæ¯..." onkeydown="if(event.key==='Enter') sendMessage()">
    </div>

    <div class="right-box">
        <button id="send-btn" onclick="sendMessage()">å‘é€</button>
    </div>
        </div>
   Â 
    <script src="./wechat-app.js"></script>

    <script>
        function saveHistoryAndGo() {
            // 1. æ‰¾åˆ°é¡µé¢ä¸Šæ‰€æœ‰çš„èŠå¤©æ°”æ³¡
            const bubbles = document.querySelectorAll('.bubble');
            const historyData = [];

            // 2. æŠŠæ–‡å­—æå–å‡ºæ¥
            bubbles.forEach(bubble => {
                historyData.push({
                    content: bubble.innerText,
                    type: 'text' // ç®€å•æ ‡è®°ä¸€ä¸‹ç±»å‹
                });
            });

            // 3. å­˜å…¥æµè§ˆå™¨ç¼“å­˜ (key å« 'temp_chat_log')
            localStorage.setItem('temp_chat_log', JSON.stringify(historyData));

            // 4. è·³è½¬åˆ°æœç´¢é¡µé¢
            window.location.href = 'wechat-detail.html';
        }
    </script>
</body>
</html>
