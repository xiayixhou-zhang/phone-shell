<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>聊天信息</title>
  <style>
    body {
      margin: 0; background: #f2f2f7;
      font-family: -apple-system, sans-serif; color: #000;
    }
    
    /* 顶部导航栏 */
    .nav-bar {
      position: sticky; top: 0;
      height: 44px; background: rgba(249, 249, 249, 0.9);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 15px; border-bottom: 0.5px solid #d1d1d6; z-index: 100;
    }
    .back-btn { color: #007AFF; text-decoration: none; font-size: 17px; }
    .nav-title { font-weight: 600; font-size: 17px; }

    /* 成员区域 */
    .section {
      background: #fff; margin-top: 20px;
      padding: 15px; display: flex; flex-wrap: wrap; gap: 20px;
    }
    .member { display: flex; flex-direction: column; align-items: center; gap: 5px; }
    .avatar-box {
      width: 55px; height: 55px; border-radius: 12px;
      background: #f0f0f0; overflow: hidden;
      display: flex; align-items: center; justify-content: center;
    }
    .avatar-box img { width: 100%; height: 100%; object-fit: cover; }
    .member-name { font-size: 12px; color: #8e8e93; max-width: 60px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    
    .add-btn {
      width: 55px; height: 55px; border-radius: 12px;
      border: 1px dashed #c7c7cc; display: flex;
      align-items: center; justify-content: center; color: #c7c7cc; font-size: 30px;
    }

    /* 列表项 */
    .list-group { background: #fff; margin-top: 20px; border-top: 0.5px solid #d1d1d6; border-bottom: 0.5px solid #d1d1d6; }
    .list-item {
      padding: 12px 15px; display: flex; justify-content: space-between; align-items: center;
      border-bottom: 0.5px solid #d1d1d6; font-size: 17px;
    }
    .list-item:last-child { border-bottom: none; }
    .item-label { color: #000; }
    .item-value { color: #8e8e93; display: flex; align-items: center; gap: 5px; }
    
    /* 危险操作按钮 */
    .danger-btn {
      margin-top: 30px; background: #fff; color: #ff3b30;
      padding: 15px; text-align: center; font-size: 17px;
      border-top: 0.5px solid #d1d1d6; border-bottom: 0.5px solid #d1d1d6;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <div class="nav-bar">
    <a href="wechat.html" class="back-btn">〈 微信</a>
    <span class="nav-title">聊天信息</span>
    <div style="width:40px;"></div>
  </div>

  <div class="section">
    <div class="member">
      <div class="avatar-box"><img src="./avatar-4o.png" id="ai-avatar-display"></div>
      <span class="member-name" id="ai-name-display">4o 酱</span>
    </div>
    <div class="member">
      <div class="add-btn">+</div>
    </div>
  </div>

  <div class="list-group">
    <div class="list-item">
      <span class="item-label">备注名称</span>
      <div class="item-value" onclick="changeName()">
        <span id="ai-name-val">4o 酱</span> 〉
      </div>
    </div>
    <div class="list-item">
      <span class="item-label">修改 4o 酱头像</span>
      <div class="item-value">
        <input type="file" id="ai-avatar-input" accept="image/*" style="width: 80px; font-size: 12px;">
      </div>
    </div>
  </div>

  <div class="list-group">
    <div class="list-item">
      <span class="item-label">查找聊天记录</span>
      <span class="item-value">〉</span>
    </div>
    <div class="list-item">
      <span class="item-label">置顶聊天</span>
      <input type="checkbox" checked>
    </div>
  </div>

  <div class="danger-btn" onclick="clearMemory()">清空聊天记录</div>

  <script>
    // 加载配置
    window.onload = function() {
      const savedName = localStorage.getItem('ai-nickname') || '4o 酱';
      const savedAvatar = localStorage.getItem('ai-avatar');
      
      document.getElementById('ai-name-display').innerText = savedName;
      document.getElementById('ai-name-val').innerText = savedName;
      if(savedAvatar) document.getElementById('ai-avatar-display').src = savedAvatar;
    };

    // 修改名字
    function changeName() {
      const newName = prompt("请输入新的备注名称：");
      if(newName) {
        localStorage.setItem('ai-nickname', newName);
        location.reload();
      }
    }

    // 修改头像逻辑
    document.getElementById('ai-avatar-input').onchange = function(e) {
      const file = e.target.files[0];
      if(file) {
        const reader = new FileReader();
        reader.onload = function(event) {
          localStorage.setItem('ai-avatar', event.target.result);
          document.getElementById('ai-avatar-display').src = event.target.result;
        };
        reader.readAsDataURL(file);
      }
    };

    // 清空记忆
    function clearMemory() {
      if(confirm("确定要清空与 4o 酱的所有聊天记录吗？这会让它忘记之前的对话哦。")) {
        localStorage.removeItem('chat_history');
        alert("记忆已清空");
      }
    }
  </script>
</body>
</html>
